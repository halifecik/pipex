#!/bin/bash

# Test 1: Word count using cat and wc
./pipex infile "cat" "wc -w" outfile1
< infile cat | wc -w > expected1

# Test 2: Filter 'test' with grep, then count lines
./pipex infile "grep test" "wc -l" outfile2
< infile grep test | wc -l > expected2

# Test 3: Sort and remove duplicates
./pipex infile "sort" "uniq" outfile3
< infile sort | uniq > expected3

# Compare outputs
for i in {1..3}; do
    echo "Test $i:"
    diff -s "outfile$i" "expected$i"
done

rm outfile* expected*
